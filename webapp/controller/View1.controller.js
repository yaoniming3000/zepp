sap.ui.define([
	"sap/ui/core/mvc/Controller",
	"sap/ui/model/Filter",
	"sap/ui/model/FilterOperator",
	"sap/ui/model/FilterType",
	"sap/ui/model/json/JSONModel"
], function (Controller, Filter, FilterOperator, FilterType, JSONModel) {
	"use strict";
	return Controller.extend("epp.epp.controller.View1", {
		onInit: function () {
			this.getView().bindElement("/HeaderSet(0)");
			//Set table filter
			var oItems30 = this.getView().byId("table0").getBinding("items");
			var oFilter = new Filter("Type", FilterOperator.EQ, "30OFF");
			oItems30.filter(oFilter, FilterType.Application);
			var oItems25 = this.getView().byId("table0_1647392825202").getBinding("items");
			var oFilter25 = new Filter("Type", FilterOperator.EQ, "25OFF");
			oItems25.filter(oFilter25, FilterType.Application);
		},
		/**
		 *@memberOf epp.epp.controller.View1
		 */
		onSave: function (oEvent) {
			//This code was generated by the layout editor.
			var oModel = this.getView().getModel();
			var mParameters = {
				success: function (odata, resp) {
					sap.m.MessageToast.show("Changes have been saved");
				},
				error: function (odata, resp) {}
			};
			oModel.submitChanges(mParameters);
		},
		onOpenDialog: function () {
			console.log("open dialog");
			this.getOwnerComponent().emailDialog.open(this.getView());
		},
		/**
		 *@memberOf epp.epp.controller.View1
		 */
		onInfoBtn: function (oEvent) {
			window.open("https://www.bridgestone.com.au/family-and-friends");
		},
		/**
		 *@memberOf epp.epp.controller.View1
		 */
		onCopyVoucher: function (oEvent) {
			var sCode = oEvent.getSource().getBindingContext().getObject().VoucherCode;
			navigator.clipboard.writeText(sCode);
			sap.m.MessageToast.show("Voucher code has been copied to clipboard");
		}
	});
});